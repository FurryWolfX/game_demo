System.register("chunks:///_virtual/Animate.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e.tween}],execute:function(){e({applyZoomFromZeroTo:function(e,t,o,c){void 0===t&&(t=1);void 0===o&&(o=.1);n().target({scale:0}).to(o,{scale:t},{onUpdate:function(t){e.setScale(t.scale,t.scale)},onComplete:function(){"function"==typeof c&&c()}}).start()},applyZoomTo:function(e,t,o,c){void 0===t&&(t=0);void 0===o&&(o=.1);var i={scale:e.scale.x};n().target(i).to(o,{scale:t},{onUpdate:function(t){e.setScale(t.scale,t.scale)},onComplete:function(){"function"==typeof c&&c()}}).start()},typing:function(e,t,n){var o={onComplete:function(){},cancel:function(){e.unschedule(s)}},c="",i=0,a=n.split(""),s=function n(){c+=a[i],t.string=c,++i===a.length&&(e.unschedule(n),o.onComplete())};return e.schedule(s,.05),o}}),t._RF.push({},"73ef9H25zFCAL9BycFV++J8","Animate",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Battle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sleep.ts","./Card.ts","./Common.ts","./MapLevelConfig.ts","./ResBattle.ts","./Buff.ts","./Skill.ts","./State.ts"],(function(e){"use strict";var t,n,r,a,s,o,i,c,u,f,l,p,d,h,m,g,v,k,y,L,b,x,N;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,r=e.asyncToGenerator,a=e.regeneratorRuntime,s=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,i=e._decorator,c=e.Label,u=e.instantiate,f=e.Component,l=e.randomRangeInt},function(e){p=e.sleep},function(e){d=e.Card},function(e){h=e.loadSceneWithLoading,m=e.SCENE_NAME},function(e){g=e.getRandomNode,v=e.mapLevel1},function(e){k=e.ResBattle},function(e){y=e.Buff},function(e){L=e.SkillTarget,b=e.PassiveType},function(e){x=e.globalState,N=e.globalMessage}],execute:function(){var C;o._RF.push({},"c82c31XQJBE+afu9UOe03EC","Battle",void 0);var A=i.ccclass;i.property,e("Battle",A("Battle")(C=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var i=o.prototype;return i.start=function(){0===x.gameLevel&&(x.gameLevel=1),x.currentMapNode=g(v,x.gameStep);var e=this.node.getChildByName("关卡文本");if(e&&(e.getComponent(c).string="关卡"+x.gameLevel+"-"+x.gameStep),this.node.getChildByName("MapNodeMsg").destroy(),x.currentMapNode.messageList.length>0){var t=u(this.res.mapNodeMsg);this.node.addChild(t)}N.addMessage("现在是你的回合，点击你的角色来施放技能")},i.finishThisRound=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.isAttacking=!0,!this.isYouWin()){e.next=5;break}x.gameStep<Object.keys(v).length?h(m.NEXT):h(m.WIN),e.next=14;break;case 5:if(!this.isYouLoss()){e.next=9;break}h(m.LOOSE),e.next=14;break;case 9:return e.next=11,this.beforeRound();case 11:return e.next=13,this.enemyAction();case 13:this.resetRound();case 14:x.isAttacking=!1,N.addMessage("现在是你的回合，点击你的角色来施放技能");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.isYouWin=function(){return 0===this.enemyNodeList.length},i.isYouLoss=function(){return 0===this.allyNodeList.length},i.enemyAction=function(){var e=r(a().mark((function e(){var t,n,r,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a().mark((function e(){var t,n,s,i,c,u,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.value,n=t.getComponent(d),s=n.state.role,n.state.canDoAction&&(i=s.skillList.filter((function(e){return e.mp<=n.state.currentMp})),c=i[l(0,i.length)],n.state.currentMp-=c.mp,c.target===L.ENEMY?c.isAOE?o.allyNodeList.forEach((function(e){e.getComponent(d).beAttack(c,n)})):(u=l(0,o.allyNodeList.length),o.allyNodeList[u].getComponent(d).beAttack(c,n)):c.target===L.ALLY&&(c.isAOE?o.enemyNodeList.forEach((function(e){e.getComponent(d).beAttack(c,n)})):(f=l(0,o.enemyNodeList.length),o.enemyNodeList[f].getComponent(d).beAttack(c,n)))),n.state.canDoAction=!1,e.next=7,p(1);case 7:case"end":return e.stop()}}),e)})),n=s(this.enemyNodeList);case 2:if((r=n()).done){e.next=6;break}return e.delegateYield(t(),"t0",4);case 4:e.next=2;break;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.beforeRound=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.replenishment(),e.next=3,this.buffAction();case 3:return e.next=5,Promise.all([this.enemyPassiveAction(),this.allyPassiveAction()]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.replenishment=function(){for(var e=0,t=[].concat(this.enemyNodeList,this.allyNodeList);e<t.length;e++){var n=t[e].getComponent(d);n.state.currentMp+=10,n.state.currentMp>n.state.role.mp&&(n.state.currentMp=n.state.role.mp)}},i.buffAction=function(){var e=r(a().mark((function e(){var t,n,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(0,t=0,n=[].concat(this.enemyNodeList,this.allyNodeList);t<n.length;t++)r=n[t],(s=r.getComponent(d)).state.buffList.forEach((function(e){e.round!==y.INFINITE&&e.round--})),s.state.buffList=s.state.buffList.filter((function(e){return e.round>0})),s.state.buffList.forEach((function(e){e.beforeAction()}));e.next=5;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.enemyPassiveAction=function(){var e=r(a().mark((function e(){var t,n,r,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a().mark((function e(){var t,n,i,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.value,n=t.getComponent(d),i=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=u.value).type!==b.HOLO){e.next=15;break}e.t0=t.target,e.next=e.t0===L.ALLY?5:e.t0===L.ENEMY?9:13;break;case 5:return o.enemyNodeList.forEach((function(e){e.getComponent(d).beAttack(t,n)})),e.next=8,p(1);case 8:return e.abrupt("break",13);case 9:return o.allyNodeList.forEach((function(e){e.getComponent(d).beAttack(t,n)})),e.next=12,p(1);case 12:return e.abrupt("break",13);case 13:e.next=16;break;case 15:t.type===b.PER_ROUND&&t.changeDamage(0,n);case 16:case"end":return e.stop()}}),e)})),c=s(n.state.role.passiveSkillList);case 4:if((u=c()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:case"end":return e.stop()}}),e)})),n=s(this.enemyNodeList);case 2:if((r=n()).done){e.next=6;break}return e.delegateYield(t(),"t0",4);case 4:e.next=2;break;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.allyPassiveAction=function(){var e=r(a().mark((function e(){var t,n,r,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a().mark((function e(){var t,n,i,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.value,n=t.getComponent(d),i=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=u.value).type!==b.HOLO){e.next=15;break}e.t0=t.target,e.next=e.t0===L.ALLY?5:e.t0===L.ENEMY?9:13;break;case 5:return o.allyNodeList.forEach((function(e){e.getComponent(d).beAttack(t,n)})),e.next=8,p(1);case 8:return e.abrupt("break",13);case 9:return o.enemyNodeList.forEach((function(e){e.getComponent(d).beAttack(t,n)})),e.next=12,p(1);case 12:return e.abrupt("break",13);case 13:e.next=16;break;case 15:t.type===b.PER_ROUND&&t.changeDamage(0,n);case 16:case"end":return e.stop()}}),e)})),c=s(n.state.role.passiveSkillList);case 4:if((u=c()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:case"end":return e.stop()}}),e)})),n=s(this.allyNodeList);case 2:if((r=n()).done){e.next=6;break}return e.delegateYield(t(),"t0",4);case 4:e.next=2;break;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.resetRound=function(){this.enemyNodeList.forEach((function(e){e.getComponent(d).state.canDoAction=!0})),this.allyNodeList.forEach((function(e){e.getComponent(d).state.canDoAction=!0}))},n(o,[{key:"res",get:function(){return this.node.scene.getChildByName("ResBattle").getComponent(k)}},{key:"enemyNodeList",get:function(){return this.res.enemyCardGroup.children.filter((function(e){var t;return!1===(null==(t=e.getComponent(d))?void 0:t.state.isDead)}))}},{key:"allyNodeList",get:function(){return this.res.allyCardGroup.children.filter((function(e){var t;return!1===(null==(t=e.getComponent(d))?void 0:t.state.isDead)}))}}]),o}(f))||C);o._RF.pop()}}}));

System.register("chunks:///_virtual/BattleBtnCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx-cc.ts","./ResBattle.ts","./State.ts"],(function(t){"use strict";var e,n,c,o,s,r,a,i,u,l,f,B;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){c=t.cclegacy,o=t._decorator,s=t.Button,r=t.Sprite,a=t.game},function(t){i=t.reaction,u=t.ComponentWithGC},function(t){l=t.ResBattle},function(t){f=t.globalState,B=t.SELECT_MODE}],execute:function(){var d;c._RF.push({},"6c261SA51FIR6ouwwNWq9Ih","BattleBtnCtrl",void 0);var p=o.ccclass;o.property,t("BattleBtnCtrl",p("BattleBtnCtrl")(d=function(t){function c(){return t.apply(this,arguments)||this}e(c,t);var o=c.prototype;return o.start=function(){var t=this;this.addRunner(i((function(){return f.isAttacking}),(function(){f.selectMode!==B.NORMAL||f.isAttacking?(t.res.finishButton.getComponent(s).interactable=!1,t.res.finishButton.getComponent(r).grayscale=!0):(t.res.finishButton.getComponent(s).interactable=!0,t.res.finishButton.getComponent(r).grayscale=!1)}),{fireImmediately:!0})),this.addRunner(i((function(){return f.selectMode}),(function(){switch(f.selectMode){case B.SELECT_ALLY:case B.SELECT_ENEMY:a.canvas.style.cursor="crosshair",t.res.cancelSelectButton.active=!0;break;default:a.canvas.style.cursor="default",t.res.cancelSelectButton.active=!1}}),{fireImmediately:!0}))},o.cancelSelectMode=function(){f.selectMode=B.NORMAL},o.update=function(t){},n(c,[{key:"res",get:function(){return this.node.scene.getChildByName("ResBattle").getComponent(l)}}]),c}(u))||d);c._RF.pop()}}}));

System.register("chunks:///_virtual/Boss1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./Role.ts"],(function(t){"use strict";var e,n,r,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){a=t.Skill},function(t){c=t.Role}],execute:function(){n._RF.push({},"8887bVEANZBFav9H38qNAab","Boss1",void 0);r.ccclass,r.property;var o=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).name="攻击",e.desc="造成150%的基础攻击伤害",e.isAOE=!1,e}return e(n,t),n.prototype.changeDamage=function(e){return t.prototype.changeDamage.call(this,1.5*e)},n}(a),s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).name="群攻",e.desc="造成70%的基础攻击伤害",e.isAOE=!0,e.mp=20,e}return e(n,t),n.prototype.changeDamage=function(e){return t.prototype.changeDamage.call(this,.7*e)},n}(a);t("Boss1",function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).roleName="弱小的怪物",e.desc="弱小的怪物",e.img="Images/Enemy/enemy01",e.hp=50,e.mp=50,e.attack=6,e.skillList=[new o,new s],e.passiveSkillList=[],e}return e(n,t),n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/Boss2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./Role.ts"],(function(t){"use strict";var e,n,r,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){c=t.Skill},function(t){o=t.Role}],execute:function(){n._RF.push({},"269e7KW8wpJc49AzTuMXVrd","Boss2",void 0);r.ccclass,r.property;var a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).name="攻击",e.desc="造成150%的基础攻击伤害",e.isAOE=!1,e}return e(n,t),n.prototype.changeDamage=function(e){return t.prototype.changeDamage.call(this,1.5*e)},n}(c),s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).name="群攻",e.desc="造成70%的基础攻击伤害",e.isAOE=!0,e.mp=20,e}return e(n,t),n.prototype.changeDamage=function(e){return t.prototype.changeDamage.call(this,.7*e)},n}(c);t("Boss2",function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).roleName="普通的怪物",e.desc="普通的怪物",e.hp=100,e.mp=100,e.attack=10,e.skillList=[new a,new s],e.passiveSkillList=[],e}return e(n,t),n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/Boss3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./Role.ts"],(function(t){"use strict";var n,e,r,c,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator},function(t){c=t.Skill},function(t){o=t.Role}],execute:function(){e._RF.push({},"76756CpnnVN1ofV/B5itfBr","Boss3",void 0);r.ccclass,r.property;var a=function(t){function e(){for(var n,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(n=t.call.apply(t,[this].concat(r))||this).name="攻击",n.desc="造成150%的基础攻击伤害",n.isAOE=!1,n}return n(e,t),e.prototype.changeDamage=function(n){return t.prototype.changeDamage.call(this,1.5*n)},e}(c),s=function(t){function e(){for(var n,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(n=t.call.apply(t,[this].concat(r))||this).name="群攻",n.desc="造成70%的基础攻击伤害",n.isAOE=!0,n.mp=20,n}return n(e,t),e.prototype.changeDamage=function(n){return t.prototype.changeDamage.call(this,.7*n)},e}(c);t("Boss3",function(t){function e(){for(var n,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(n=t.call.apply(t,[this].concat(r))||this).roleName="强大的怪物",n.desc="强大的怪物",n.hp=150,n.mp=100,n.attack=15,n.skillList=[new a,new s],n.passiveSkillList=[],n}return n(e,t),e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/Buff.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"318f4siiL5H8q2fgd34oO6W","Buff",void 0),t("Buff",function(){function t(){this.name="",this.desc="",this.icon="",this.spriteFrame=null,this.round=0,this.damage=0,this.sourceCard=null,this.propScale={hp:1,mp:1,attack:1}}var n=t.prototype;return n.beforeAction=function(){},n.afterAction=function(){},n.attack=function(t,n,c){return t},n.beAttack=function(t,n,c){return t},n.afterBeAttack=function(){},t}()).INFINITE=999,n._RF.pop()}}}));

System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx-cc.ts","./Battle.ts","./EffectAttack1.ts","./EffectHeal1.ts","./EffectShake.ts","./ResBattle.ts","./Buff.ts","./Skill.ts","./SkillSelector.ts","./State.ts"],(function(t){"use strict";var e,s,a,i,n,r,o,c,l,u,f,h,d,p,m,g,k,C,M,S,y,E,v,A,L;return{setters:[function(t){e=t.inheritsLoose,s=t.createClass},function(t){a=t.cclegacy,i=t._decorator,n=t.resources,r=t.SpriteFrame,o=t.Sprite,c=t.Node,l=t.instantiate,u=t.Label},function(t){f=t.reaction,h=t.autorun,d=t.ComponentWithGC,p=t.makeAutoObservable},function(t){m=t.Battle},function(t){g=t.EffectAttack1},function(t){k=t.EffectHeal1},function(t){C=t.EffectShake},function(t){M=t.ResBattle},function(t){S=t.Buff},function(t){y=t.SkillTarget},function(t){E=t.SkillSelector},function(t){v=t.globalState,A=t.SELECT_MODE,L=t.globalMessage}],execute:function(){var b;a._RF.push({},"ae16aGtCBhDALmKIcfAGF4q","Card",void 0);var N=i.ccclass,H=(i.property,function(){function t(){this.currentHp=0,this.currentMp=0,this.canDoAction=!0,this.isDead=!1,this.isEnemy=!1,this.role=null,this.buffList=[],p(this)}var e=t.prototype;return e.setRole=function(t){this.role=t,0===this.currentHp&&(this.currentHp=this.maxHp),0===this.currentMp&&(this.currentMp=this.maxMp)},e.addBuff=function(t){this.buffList.push(t),this.buffList=this.mergeBuff(this.buffList)},e.removeBuffByName=function(t){this.buffList=this.buffList.filter((function(e){return e.name!==t}))},e.mergeBuff=function(t){var e=[];return t.forEach((function(t){var s=e.find((function(e){return e.name===t.name&&e.sourceCard===t.sourceCard}));s?s.round+=t.round:e.push(t)})),e},s(t,[{key:"currentAttack",get:function(){var t=this.role.attack;return this.buffList.forEach((function(e){t=Math.ceil(t*e.propScale.attack)})),t}},{key:"maxHp",get:function(){var t=this.role.hp;return this.buffList.forEach((function(e){t*=e.propScale.hp})),t}},{key:"maxMp",get:function(){var t=this.role.mp;return this.buffList.forEach((function(e){t*=e.propScale.mp})),t}}]),t}());t("Card",N("Card")(b=function(t){function a(){for(var e,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).state=new H,e.skillSelectorMask=null,e}e(a,t);var i=a.prototype;return i.onLoad=function(){},i.setRole=function(t){var e=this;this.state.setRole(t),this.state.role.img&&n.load(this.state.role.img+"/spriteFrame",r,(function(t,s){e.node.getChildByPath("Node/卡片头像").getComponent(o).spriteFrame=s})),t.start(this);var s="";this.state.isEnemy&&(s="敌"),this.state.role.suffix=s},i.start=function(){var t=this;this.bindEvent(),this.addRunner(f((function(){return t.state.buffList}),(function(){return t.renderBuff()}),{fireImmediately:!0})),this.addRunner(f((function(){return t.state.maxHp}),(function(e,s){if(s){var a=t.state.currentHp/s;t.state.currentHp=Math.ceil(e*a)}else t.state.currentHp=e}),{fireImmediately:!0})),this.addRunner(f((function(){return t.state.maxMp}),(function(e,s){if(s){var a=t.state.currentMp/s;t.state.currentMp=Math.ceil(e*a)}else t.state.currentMp=e}),{fireImmediately:!0})),this.addRunner(h((function(){return t.handleDead()})))},i.bindEvent=function(){var t=this;this.node.on(c.EventType.TOUCH_END,(function(e){t.handleClick(e)}),null,!1)},i.renderBuff=function(){var t=this,e=this.node.getChildByName("BuffLayout");e.removeAllChildren(),this.state.buffList.forEach((function(s){var a=l(t.res.buffIcon),i=s.round.toString();s.round===S.INFINITE&&(i=""),a.getChildByName("Round").getComponent(u).string=i,e.addChild(a),s.spriteFrame?a.getComponent(o).spriteFrame=s.spriteFrame:s.icon&&n.load(s.icon+"/spriteFrame",r,(function(e,a){s.spriteFrame=a,t.state.buffList=[].concat(t.state.buffList)}))}))},i.handleRefresh=function(){if(this.state.role){this.node.getChildByPath("roleName").getComponent(u).string=this.state.role.fullName,this.node.getChildByPath("attack").getComponent(u).string=this.state.currentAttack.toString();var t=this.node.getChildByName("hp");t.getChildByName("text").getComponent(u).string=this.state.currentHp+"/"+this.state.maxHp,t.getChildByName("hphave").getComponent(o).fillRange=this.state.currentHp/this.state.maxHp;var e=this.node.getChildByName("mp");e.getChildByName("text").getComponent(u).string=this.state.currentMp+"/"+this.state.maxMp,e.getChildByName("mphave").getComponent(o).fillRange=this.state.currentMp/this.state.maxMp}var s=this.node.getChildByName("CanDoAction");this.state.canDoAction?s.active=!0:s.active=!1},i.handleClick=function(t){if(this.state.isEnemy){if(v.selectMode===A.SELECT_ENEMY){v.sourceCard.state.currentMp-=v.sourceSkill.mp,v.sourceSkill.changeSkillProp(v.sourceCard);for(var e=0;e<v.sourceSkill.attackCount;e++)this.beAttack(v.sourceSkill,v.sourceCard);v.selectMode=A.NORMAL,this.afterAction(v.sourceCard)}}else if(v.selectMode===A.NORMAL)this.state.isDead?L.addMessage("该角色已经死亡"):this.state.canDoAction?null!==this.skillSelectorMask&&this.skillSelectorMask.name||(this.skillSelectorMask=l(this.res.skillSelectorMask),this.res.canvas.addChild(this.skillSelectorMask),this.skillSelectorMask.getComponent(E).open(this)):L.addMessage("该角色已经没有行动点");else if(v.selectMode===A.SELECT_ALLY)if(v.sourceCard.state.isDead)L.addMessage("该角色已经死亡");else{v.sourceCard.state.currentMp-=v.sourceSkill.mp,v.sourceSkill.changeSkillProp(v.sourceCard);for(var s=0;s<v.sourceSkill.attackCount;s++)this.beAttack(v.sourceSkill,v.sourceCard);v.selectMode=A.NORMAL,v.sourceCard.state.canDoAction=!1}},i.handleSkillSelect=function(t){var e=this;t.mp&&this.state.currentMp<t.mp?L.addMessage("MP不足，我发施放该技能"):(this.skillSelectorMask&&this.skillSelectorMask.name&&this.skillSelectorMask.getComponent(E).close(),t.target===y.ENEMY?t.isAOE?(this.state.currentMp-=t.mp,this.enemyNodeList.forEach((function(s){var i=s.getComponent(a);t.changeSkillProp(e);for(var n=0;n<t.attackCount;n++)i.beAttack(t,e)})),this.afterAction(this)):(L.addMessage("需要选择一个敌人"),v.selectMode=A.SELECT_ENEMY,v.sourceCard=this,v.sourceSkill=t):t.target===y.ALLY&&(t.isAOE?(this.state.currentMp-=t.mp,this.allyNodeList.forEach((function(s){var i=s.getComponent(a);t.changeSkillProp(e);for(var n=0;n<t.attackCount;n++)i.beAttack(t,e)})),this.afterAction(this)):(L.addMessage("需要选择一个盟友"),v.selectMode=A.SELECT_ALLY,v.sourceCard=this,v.sourceSkill=t)))},i.afterAction=function(t){t.state.canDoAction=!1,t.state.buffList.forEach((function(t){t.afterAction()}));var e=this.res.allyCardGroup,s=0;e.children.forEach((function(t){t.getComponent(a).state.canDoAction&&s++})),0===s&&this.res.canvas.getComponent(m).finishThisRound()},i.update=function(t){this.state.role.update(this),this.handleRefresh()},i.beBuffAttack=function(t,e){if(!this.state.isDead){var s=e.state.role.roleName,a=this.state.role.roleName;this.state.currentHp-=t.damage,this.state.currentHp<0&&(this.state.currentHp=0),L.addMessage("<color=#FF0000>["+s+"] 使用 ["+t.name+"] 对 ["+a+"] 造成了 "+-t.damage+" 点伤害</color>"),this.applySkillEffect(g),this.applySkillEffect(C)}},i.beAttack=function(t,e){var s=this;if(!this.state.isDead){var a=e.state.role.roleName,i=this.state.role.roleName;t.beforeChangeDamage(e);var n=t.changeDamage(e.state.currentAttack,e,this);e.state.buffList.forEach((function(t){n=t.attack(n,e,s)})),this.state.buffList.forEach((function(e){n=e.beAttack(n,s,t.isHeal)})),t.isHeal?this.beHeal(n,t,e):(this.state.currentHp-=n,this.state.currentHp<0&&(this.state.currentHp=0),L.addMessage("<color=#FF0000>["+a+"] 使用 ["+t.name+"] 对 ["+i+"] 造成了 "+-n+" 点伤害</color>"),t.effect?this.applySkillEffect(t.effect):this.applySkillEffect(g),this.applySkillEffect(C)),this.state.buffList.forEach((function(t){t.afterBeAttack()}))}},i.beHeal=function(t,e,s){var a=s.state.role.roleName,i=this.state.role.roleName;this.state.currentHp+=t,this.state.currentHp>this.state.maxHp&&(this.state.currentHp=this.state.maxHp),L.addMessage("<color=#00FF00>["+a+"] 使用 ["+e.name+"] 对 ["+i+"] 造成了 "+t+" 点治疗</color>"),e.effect?this.applySkillEffect(e.effect):this.applySkillEffect(k)},i.handleDead=function(){this.state.currentHp<=0&&(this.state.isDead=!0,this.setAllGray(this.node))},i.setAllGray=function(t){var e=this;t.getComponent(o)&&(t.getComponent(o).grayscale=!0),t.children.length&&t.children.forEach((function(t){e.setAllGray(t)}))},i.applySkillEffect=function(t){var e=this.addComponent(t);this.scheduleOnce((function(){e.destroy()}),1)},s(a,[{key:"res",get:function(){return this.node.scene.getChildByName("ResBattle").getComponent(M)}},{key:"enemyNodeList",get:function(){return this.res.enemyCardGroup.children.filter((function(t){return t.getComponent(a)}))}},{key:"allyNodeList",get:function(){return this.res.allyCardGroup.children.filter((function(t){return t.getComponent(a)}))}}]),a}(d))||b);a._RF.pop()}}}));

System.register("chunks:///_virtual/CardGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./ResBattle.ts","./RolePool.ts"],(function(t){"use strict";var e,n,o,r,i,s,a,c,u,d,p;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,r=t._decorator,i=t.LayoutComponent,s=t.instantiate,a=t.UITransform,c=t.Component},function(t){u=t.Card},function(t){d=t.ResBattle},function(t){p=t.RolePool}],execute:function(){var l;o._RF.push({},"5f665CLRHdB7pyuYG2kIout","CardGroup",void 0);var h=r.ccclass;r.property,t("CardGroup",h("CardGroup")(l=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.onLoad=function(){},r.start=function(){this.node.getComponent(i).paddingLeft=0,this.node.removeAllChildren();for(var t=0,e=0;e<p.length;e++){var n=s(this.res.card);t=n.getComponent(a).contentSize.width,n.getComponent(u).setRole(new p[e]),this.node.addChild(n)}var o=this.node.children.length,r=this.getComponent(a).contentSize.x;this.getComponent(i).spacingX=(r-o*t)/(o+1),this.getComponent(i).padding=(r-o*t)/(o+1)},r.update=function(t){},n(o,[{key:"res",get:function(){return this.node.scene.getChildByName("ResBattle").getComponent(d)}}]),o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["cc","./State.ts"],(function(t){"use strict";var e,n,o;return{setters:[function(t){e=t.cclegacy,n=t.director},function(t){o=t.globalState}],execute:function(){var c;t({SCENE_NAME:void 0,loadSceneWithLoading:function(t){o.nextSceneName=t,n.loadScene("Loading")}}),e._RF.push({},"70292ke/zJCx5hchCl39tpO","Common",void 0),function(t){t.BATTLE="Battle",t.NEXT="Next",t.LOOSE="Loose",t.WIN="Win"}(c||(c=t("SCENE_NAME",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/EffectAttack1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(t){"use strict";var e,c,r,f,n;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,r=t._decorator,f=t.Vec2},function(t){n=t.EffectBase}],execute:function(){var a;c._RF.push({},"835597YD4tBYYMS2ziO2lxZ","EffectAttack1",void 0);var s=r.ccclass;r.property,t("EffectAttack1",s("EffectAttack1")(a=function(t){function c(){for(var e,c=arguments.length,r=new Array(c),n=0;n<c;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).offset=new f(0,0),e.effectName="attack1",e}return e(c,t),c}(n))||a);c._RF.pop()}}}));

System.register("chunks:///_virtual/EffectBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResBattle.ts"],(function(t){"use strict";var e,i,n,s,o,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.instantiate,o=t.Vec2,a=t.Component},function(t){c=t.ResBattle}],execute:function(){i._RF.push({},"c0275xbqkFFGYq3TJZWBYnI","EffectBase",void 0);n.ccclass,n.property,t("EffectBase",function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).animate=null,e.offset=new o(0,0),e.effectName="",e}e(i,t);var n=i.prototype;return n.start=function(){var t=this.node.scene.getChildByName("ResBattle").getComponent(c);if(this.effectName){var e=t[this.effectName];this.animate=s(e);var i=this.node.position.x,n=this.node.position.y;this.animate.setPosition(i+this.offset.x,n+this.offset.y),this.node.parent.addChild(this.animate)}},n.update=function(t){var e=this.node.position.x,i=this.node.position.y;this.animate&&this.animate.setPosition(e+this.offset.x,i+this.offset.y)},n.onDestroy=function(){this.animate&&this.animate.destroy()},i}(a));i._RF.pop()}}}));

System.register("chunks:///_virtual/EffectHeal1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(e){"use strict";var t,c,r,f,n;return{setters:[function(e){t=e.inheritsLoose},function(e){c=e.cclegacy,r=e._decorator,f=e.Vec2},function(e){n=e.EffectBase}],execute:function(){var a;c._RF.push({},"3fe21jWmXBPEb7Zrv1LlY+S","EffectHeal1",void 0);var s=r.ccclass;r.property,e("EffectHeal1",s("EffectHeal1")(a=function(e){function c(){for(var t,c=arguments.length,r=new Array(c),n=0;n<c;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).offset=new f(0,10),t.effectName="heal1",t}return t(c,e),c}(n))||a);c._RF.pop()}}}));

System.register("chunks:///_virtual/EffectShake.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,r,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.tween,a=t.Vec3,s=t.Component}],execute:function(){var i;o._RF.push({},"a5aed/p4/BMv5WDOtyIvRTQ","EffectShake",void 0);var c=n.ccclass;n.property,t("EffectShake",c("EffectShake")(i=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){this.shake()},n.shake=function(){var t=this.node;if(t){for(var e,o=[],n=t.getPosition(),s=0;s<10;s++)o.push(r().target(t).to(.03,{position:new a(n.x+4*Math.random(),n.y+4*Math.random(),0)})),o.push(r().target(t).to(.03,{position:new a(n.x-4*Math.random(),n.y-4*Math.random(),0)}));o.push(r().target(t).to(.03,{position:n},{onComplete:function(){}})),(e=r(t)).sequence.apply(e,o).start()}},o}(s))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyCardGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./ResBattle.ts","./State.ts"],(function(t){"use strict";var e,n,o,r,a,s,p,i,c,l,m,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,r=t._decorator,a=t.LayoutComponent,s=t.instantiate,p=t.v3,i=t.UITransform,c=t.Component},function(t){l=t.Card},function(t){m=t.ResBattle},function(t){u=t.globalState}],execute:function(){var g;o._RF.push({},"9dd5bxpgWBGCLYZNn/IPs84","EnemyCardGroup",void 0);var d=r.ccclass;r.property,t("EnemyCardGroup",d("EnemyCardGroup")(g=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.onLoad=function(){},r.start=function(){var t=u.currentMapNode;this.node.getComponent(a).paddingLeft=0,this.node.removeAllChildren();for(var e=0,n=0;n<t.enemyList.length;n++){var o=s(this.res.card);if(o.scale=p(.95,.95,1),o.getComponent(l).state.isEnemy=!0,e=o.getComponent(i).contentSize.width,o.getComponent(l).setRole(t.enemyList[n]),u.gameStep>2){var r=.1*(u.gameStep-2)+1;o.getComponent(l).state.role.hp=Math.ceil(o.getComponent(l).state.role.hp*r),o.getComponent(l).state.currentHp=o.getComponent(l).state.role.hp,o.getComponent(l).state.role.mp=Math.ceil(o.getComponent(l).state.role.mp*r),o.getComponent(l).state.currentMp=o.getComponent(l).state.role.mp,o.getComponent(l).state.role.attack=Math.ceil(o.getComponent(l).state.role.attack*r)}this.node.addChild(o)}var c=this.node.children.length,m=this.getComponent(i).contentSize.x;this.getComponent(a).spacingX=(m-c*e)/(c+1),this.getComponent(a).padding=(m-c*e)/(c+1)},r.update=function(t){},n(o,[{key:"res",get:function(){return this.node.scene.getChildByName("ResBattle").getComponent(m)}}]),o}(c))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/Items.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var n;t("ItemType",void 0),e._RF.push({},"5ab43VWpNhNppyvBmykMeFy","Items",void 0),function(t){t[t.DEFENSE=0]="DEFENSE",t[t.ATTACK=1]="ATTACK",t[t.DAMAGE_PER_ROUND=2]="DAMAGE_PER_ROUND"}(n||(n=t("ItemType",{})));t("Item",function(){function t(){this.name="",this.desc="",this.icon="",this.spriteFrame=null,this.type=n.ATTACK,this.damage=0}return t.prototype.changeDamage=function(t){return t},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts"],(function(e){"use strict";var t,n,o,r,a,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.ProgressBar,a=e.director,c=e.Component},function(e){i=e.globalState}],execute:function(){var s;n._RF.push({},"de0a36QQmhOAJeTMbslVoph","Loading",void 0);var u=o.ccclass;o.property,e("Loading",u("Loading")(s=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){var e=this.node.getChildByName("ProgressBar").getComponent(r);a.preloadScene(i.nextSceneName,(function(t,n){var o=t/n;e.progress=o}),(function(){a.loadScene(i.nextSceneName)}))},o.update=function(e){},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Loose.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./State.ts"],(function(t){"use strict";var o,e,n,r,c,s,i;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.Component},function(t){c=t.loadSceneWithLoading,s=t.SCENE_NAME},function(t){i=t.globalState}],execute:function(){var u;e._RF.push({},"d793ct1xVJBMZt9nd/JPZJr","Loose",void 0);var a=n.ccclass;n.property,t("Loose",a("Loose")(u=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){},n.resetStep=function(){i.gameStep=1,c(s.BATTLE)},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Animate.ts","./Sleep.ts","./mobx-cc.ts","./Battle.ts","./BattleBtnCtrl.ts","./Card.ts","./CardGroup.ts","./Common.ts","./EffectAttack1.ts","./EffectBase.ts","./EffectHeal1.ts","./EffectShake.ts","./EnemyCardGroup.ts","./Items.ts","./Loading.ts","./MapGenerator.ts","./MapLevelConfig.ts","./MapNodeMsg.ts","./MessageBox.ts","./ResBattle.ts","./Boss1.ts","./Boss2.ts","./Boss3.ts","./Role.ts","./RoleFox.ts","./RoleKayldris.ts","./RoleLianhe.ts","./RoleLiufeng.ts","./RoleNian.ts","./RolePool.ts","./Loose.ts","./Next.ts","./Buff.ts","./Skill.ts","./SkillSelectBtn.ts","./SkillSelector.ts","./Start.ts","./State.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MapGenerator.ts",["cc"],(function(s){"use strict";var e;return{setters:[function(s){e=s.cclegacy}],execute:function(){var t;s("MapNodeType",void 0),e._RF.push({},"ea8f6WwmUBMAJVZLTBybYEl","MapGenerator",void 0),function(s){s[s.START=0]="START",s[s.ENEMY_BOSS=1]="ENEMY_BOSS",s[s.ENEMY=2]="ENEMY",s[s.ENEMY_EXT=3]="ENEMY_EXT",s[s.EMPTY=4]="EMPTY",s[s.CAMP=5]="CAMP",s[s.SHOP=6]="SHOP",s[s.RANDOM_EVENT=7]="RANDOM_EVENT"}(t||(t=s("MapNodeType",{})));s("MapNode",(function(s,e){switch(this.type=null,this.enemyList=[],this.itemList=[],this.messageList=[],this.event=null,this.type=s,e.messageList&&(this.messageList=e.messageList),e.enemyList&&(this.enemyList=e.enemyList),this.type){case t.START:this.messageList.push("你来到一处地下城入口，这是古代留下的遗迹，你决定深入探索寻找宝物。"),this.messageList.push("黑暗袭来，你觉得晕头转向，已经找不到回去的路。");break;case t.ENEMY:case t.ENEMY_BOSS:case t.ENEMY_EXT:break;case t.EMPTY:this.messageList.push("你发现这里空荡荡的，什么也没有。");break;case t.CAMP:this.messageList.push("TODO 你发现一处比较安全的地方，准备作为营地修正一下队伍，全体成员恢复50%的HP和MP。");break;case t.SHOP:this.messageList.push("TODO 你遇到了一个奇怪的人，他想卖给你一些东西。也许这些东西会对你有所帮助，你决定看一看。");break;case t.RANDOM_EVENT:this.messageList.push("TODO 随机事件。")}}));e._RF.pop()}}}));

System.register("chunks:///_virtual/MapLevelConfig.ts",["cc","./Boss1.ts","./Boss2.ts","./Boss3.ts","./MapGenerator.ts"],(function(e){"use strict";var n,s,t,o,i,a,c;return{setters:[function(e){n=e.cclegacy,s=e.randomRangeInt},function(e){t=e.Boss1},function(e){o=e.Boss2},function(e){i=e.Boss3},function(e){a=e.MapNode,c=e.MapNodeType}],execute:function(){e("getRandomNode",(function(e,n){var t=e[n];return t[s(0,t.length)]})),n._RF.push({},"b8c46q10tJES6ftG4jSw5zV","MapLevelConfig",void 0);e("mapLevel1",{0:[new a(c.START,{})],1:[new a(c.ENEMY,{enemyList:[new t,new t],messageList:["你遇到了一些充满敌意的生物"]})],2:[new a(c.CAMP,{}),new a(c.ENEMY_EXT,{enemyList:[new t,new o],messageList:["你遇到了一些更强大的生物"]})],3:[new a(c.CAMP,{}),new a(c.ENEMY_EXT,{enemyList:[new o,new o],messageList:["你遇到了一些更强大的生物"]})],4:[new a(c.SHOP,{})],5:[new a(c.ENEMY_BOSS,{enemyList:[new i],messageList:["眼前的生物非常强大，一起干掉他吧！"]})]});n._RF.pop()}}}));

System.register("chunks:///_virtual/MapNodeMsg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Animate.ts","./Common.ts","./State.ts","./MapGenerator.ts"],(function(e){"use strict";var t,n,o,s,a,c,i,r,p,u,d;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,s=e.Label,a=e.Node,c=e.Component},function(e){i=e.typing},function(e){r=e.loadSceneWithLoading,p=e.SCENE_NAME},function(e){u=e.globalState},function(e){d=e.MapNodeType}],execute:function(){var g;n._RF.push({},"4a5ac8egxNAZr+ggE9Xog0O","MapNodeMsg",void 0);var l=o.ccclass;o.property,e("MapNodeMsg",l("MapNodeMsg")(g=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){var e=this,t=u.currentMapNode.messageList,n=this.node.getChildByName("文本").getComponent(s),o=0,c=i(this,n,t[o]);this.node.on(a.EventType.TOUCH_END,(function(s){if(o++,t[o])c.cancel(),c=i(e,n,t[o]);else switch(e.node.destroy(),u.currentMapNode.type){case d.START:case d.EMPTY:u.gameStep++,r(p.BATTLE)}}))},o.update=function(e){},n}(c))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx-cc.ts","./ResBattle.ts","./State.ts"],(function(t){"use strict";var e,n,s,o,a,r,i,c,u,l,g;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){s=t.cclegacy,o=t._decorator,a=t.ScrollView,r=t.instantiate,i=t.RichText},function(t){c=t.autorun,u=t.ComponentWithGC},function(t){l=t.ResBattle},function(t){g=t.globalMessage}],execute:function(){var d;s._RF.push({},"d59067Yd+NNR6W/FaBE81K8","MessageBox",void 0);var p=o.ccclass;o.property,t("MessageBox",p("MessageBox")(d=function(t){function s(){return t.apply(this,arguments)||this}e(s,t);var o=s.prototype;return o.start=function(){var t=this;this.addRunner(c((function(){return t.addMessage(g.message)})))},o.addMessage=function(t){if(t){var e=this.node.getComponent(a),n=e.content,s=r(this.res.message);s.getComponent(i).string=t,n.addChild(s),e.scrollToBottom(.3)}},o.update=function(t){},n(s,[{key:"res",get:function(){return this.node.scene.getChildByName("ResBattle").getComponent(l)}}]),s}(u))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/mobx-cc.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.umd.production.min.mjs_cjs=&original=.js","./mobx.umd.production.min.js"],(function(n){"use strict";var t,o,r,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,r=n.Component},null,function(n){e=n.default}],execute:function(){o._RF.push({},"250f3JXOrhIGL68VI6tNjR3","mobx-cc",void 0),e.configure({enforceActions:!1});n("makeAutoObservable",e.makeAutoObservable),n("autorun",e.autorun),n("reaction",e.reaction),n("when",e.reaction),n("ComponentWithGC",function(n){function o(){for(var t,o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];return(t=n.call.apply(n,[this].concat(r))||this).runnerList=[],t}t(o,n);var r=o.prototype;return r.addRunner=function(n){this.runnerList.push(n)},r.onDestroy=function(){this.runnerList.forEach((function(n){n()}))},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/Next.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./MapLevelConfig.ts","./State.ts"],(function(t){"use strict";var e,n,o,i,a,r,c,u,s,p,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Label,a=t.Node,r=t.Component},function(t){c=t.loadSceneWithLoading,u=t.SCENE_NAME},function(t){s=t.getRandomNode,p=t.mapLevel1},function(t){l=t.globalState}],execute:function(){var d;n._RF.push({},"d06534VRdpErYPseTa3+EPI","Next",void 0);var g=o.ccclass;o.property,t("Win",g("Win")(d=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){var t=this,e=l.gameLevel+"-"+l.gameStep;this.node.getChildByName("文本_通关描述").getComponent(i).string="你通过了关卡"+e+"，请选择接下来的路线",this.node.getChildByName("Layout").children.forEach((function(e){e.on(a.EventType.TOUCH_END,(function(e){t.goNextStep()}))}))},o.goNextStep=function(){l.gameStep++,l.currentMapNode=s(p,l.gameStep),c(u.BATTLE)},o.update=function(t){},n}(r))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/ResBattle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,i,l,a,u,o,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,u=e.Node,o=e.Prefab,c=e.Component}],execute:function(){var p,b,f,s,y,m,g,d,z,w,h,B,v,k,C,R,M,S,G,I,_,D,F,L,N,P,A;l._RF.push({},"99f55tQ8udFUq8mLi+A8IC5","ResBattle",void 0);var j=a.ccclass,q=a.property;e("ResBattle",(p=j("ResBattle"),b=q(u),f=q(o),s=q(o),y=q(u),m=q(u),g=q(o),d=q(u),z=q(u),w=q(o),h=q(o),B=q(o),v=q(o),p((R=r((C=function(e){function r(){for(var r,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return r=e.call.apply(e,[this].concat(l))||this,n(r,"canvas",R,i(r)),n(r,"message",M,i(r)),n(r,"skillSelectorMask",S,i(r)),n(r,"enemyCardGroup",G,i(r)),n(r,"allyCardGroup",I,i(r)),n(r,"buffIcon",_,i(r)),n(r,"finishButton",D,i(r)),n(r,"cancelSelectButton",F,i(r)),n(r,"card",L,i(r)),n(r,"mapNodeMsg",N,i(r)),n(r,"attack1",P,i(r)),n(r,"heal1",A,i(r)),r}return t(r,e),r}(c)).prototype,"canvas",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(C.prototype,"message",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=r(C.prototype,"skillSelectorMask",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=r(C.prototype,"enemyCardGroup",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(C.prototype,"allyCardGroup",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=r(C.prototype,"buffIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(C.prototype,"finishButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=r(C.prototype,"cancelSelectButton",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(C.prototype,"card",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=r(C.prototype,"mapNodeMsg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(C.prototype,"attack1",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(C.prototype,"heal1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=C))||k));l._RF.pop()}}}));

System.register("chunks:///_virtual/Role.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,s;return{setters:[function(t){i=t.createClass},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"cc80fjjn6pOhIaML7NNoa+P","Role",void 0);t("Role",function(){function t(){this.roleName="",this.suffix="",this.desc="",this.img="",this.imgBig="",this.hp=100,this.mp=100,this.attack=10,this.skillList=[],this.passiveSkillList=[]}var s=t.prototype;return s.start=function(t){},s.update=function(t){},i(t,[{key:"fullName",get:function(){return this.suffix?this.roleName+"·"+this.suffix:this.roleName}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/RoleFox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Buff.ts","./Skill.ts","./Role.ts"],(function(t){"use strict";var e,n,o,a,r,c,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){a=t.Buff},function(t){r=t.Skill,c=t.PassiveType,i=t.PassiveSkill},function(t){s=t.Role}],execute:function(){n._RF.push({},"ba166+WNRxCh4JxF4By10qL","RoleFox",void 0);var l;o.ccclass,o.property;!function(t){t[t.PAW=0]="PAW",t[t.TAIL=1]="TAIL"}(l||(l={}));var u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).name="爪击/尾击",e.desc="尾击模式造成100%的基础攻击伤害，爪击模式造成两次75%的基础攻击伤害",e.attackCount=1,e}e(n,t);var o=n.prototype;return o.changeSkillProp=function(t){t.state.role.form===l.PAW?this.attackCount=2:this.attackCount=1},o.changeDamage=function(e,n){return n.state.role.form===l.PAW?t.prototype.changeDamage.call(this,.75*e):t.prototype.changeDamage.call(this,e)},n}(r),f=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).name="缠绕",e.desc="缠住目标2回合不能动",e.mp=30,e}return e(n,t),n.prototype.changeDamage=function(e,n,o){var r=new a;return r.name="缠绕",r.desc="禁锢目标",r.damage=0,r.round=2,r.sourceCard=n,r.beforeAction=function(){o.state.canDoAction=!1},r.icon="Images/BuffIcon/001禁锢",o.state.addBuff(r),t.prototype.changeDamage.call(this,0)},n}(r),p=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).name="架势切换",e.desc="切换尾巴模式或者爪击模式",e.type=c.PER_ROUND,e}return e(n,t),n.prototype.changeDamage=function(e,n){var o=n.state.role;return o.form===l.PAW?o.form=l.TAIL:o.form=l.PAW,t.prototype.changeDamage.call(this,e)},n}(i);t("RoleFox",function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).roleName="大狐狸",e.desc="大狐狸，这个人物暂无简介。",e.hp=100,e.mp=100,e.attack=10,e.form=l.PAW,e.skillList=[new u,new f],e.passiveSkillList=[new p],e}return e(n,t),n.prototype.update=function(){this.form===l.PAW?this.suffix="爪":this.suffix="尾"},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleKayldris.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Buff.ts","./Skill.ts","./Role.ts"],(function(t){"use strict";var e,n,r,a,c,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){a=t.Buff},function(t){c=t.Skill,o=t.PassiveSkill},function(t){i=t.Role}],execute:function(){n._RF.push({},"3789erGjCJFqYEKIYicbIHD","RoleKayldris",void 0);r.ccclass,r.property;var s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).name="嗜血爪击",e.desc="造成150%的基础攻击伤害，对自己进行10%基础攻击的治疗",e.isAOE=!1,e}return e(n,t),n.prototype.changeDamage=function(e,n,r){return n.beHeal(.1*e,this,n),t.prototype.changeDamage.call(this,1.5*e)},n}(c),l=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).name="净化烈焰",e.desc="使用天神怒火的力量，立即对全体敌人造成50%的基础伤害，并附加燃烧伤害，每回合造成30%伤害，持续2回合",e.isAOE=!0,e.mp=10,e}return e(n,t),n.prototype.changeDamage=function(e,n,r){var c=new a;return c.name="灼烧",c.desc="收到净化烈焰灼烧，每回合造成20%伤害",c.damage=.3*n.state.currentAttack,c.round=2,c.sourceCard=n,c.icon="Images/BuffIcon/003灼烧",c.beforeAction=function(){r.beBuffAttack(c,n)},r.state.addBuff(c),t.prototype.changeDamage.call(this,.5*e)},n}(c),u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).name="魔躯",e.desc="能量组成的躯体，对伤害减免30%",e}return e(n,t),n}(o);t("RoleKayldris",function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).roleName="凯德利斯",e.desc="为追求力量而魔化的狼人，曾经是兽人帝国的将军。",e.img="Images/Role/Kayldris/small",e.hp=100,e.mp=100,e.attack=10,e.skillList=[new s,new l],e.passiveSkillList=[new u],e}return e(n,t),n.prototype.start=function(t){var e=new a;e.sourceCard=t,e.round=999,e.name="魔躯",e.desc="能量组成的躯体，对伤害减免30%",e.icon="Images/BuffIcon/004防",e.beAttack=function(t,e,n){return n?t:Math.ceil(.7*t)},t.state.addBuff(e)},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleLianhe.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Buff.ts","./Skill.ts","./Role.ts"],(function(t){"use strict";var e,n,a,r,c,o,s,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator},function(t){r=t.Buff},function(t){c=t.Skill,o=t.PassiveType,s=t.PassiveSkill},function(t){i=t.Role}],execute:function(){n._RF.push({},"dc922OgW11AkI9HwBk08APG","RoleLianhe",void 0);a.ccclass,a.property;var u=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).name="斩击",e.desc="造成100%的基础攻击伤害",e}return e(n,t),n.prototype.changeDamage=function(e){return t.prototype.changeDamage.call(this,e)},n}(c),l=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).name="偏斩",e.desc="战斗有时也难以做到去剥夺敌人的生命，75%攻击力连续攻击两刀",e.attackCount=2,e.mp=10,e}return e(n,t),n.prototype.changeDamage=function(e){return t.prototype.changeDamage.call(this,.75*e)},n}(c),f=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).name="搓勇",e.desc="每降低1%HP，造成的伤害增加1%，最多增加100%",e.type=o.NONE,e}return e(n,t),n}(s);t("RoleLianhe",function(t){function n(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).roleName="连和",e.desc="连和，这个人物暂无简介。",e.hp=100,e.mp=100,e.attack=10,e.skillList=[new u,new l],e.passiveSkillList=[new f],e}return e(n,t),n.prototype.start=function(t){t.state.removeBuffByName("搓勇");var e=new r;e.name="搓勇",e.desc="每降低1%HP，造成的伤害增加1%，最多增加100%",e.round=999,e.sourceCard=t,e.icon="Images/BuffIcon/006攻击强化",e.afterBeAttack=function(){e.round=999,e.propScale.attack=2-t.state.currentHp/t.state.maxHp,t.state.removeBuffByName("搓勇"),t.state.addBuff(e)},t.state.addBuff(e)},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleLiufeng.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectHeal1.ts","./Skill.ts","./Role.ts"],(function(e){"use strict";var t,n,a,r,c,i,l,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator},function(e){r=e.EffectHeal1},function(e){c=e.SkillTarget,i=e.Skill,l=e.PassiveType,o=e.PassiveSkill},function(e){s=e.Role}],execute:function(){n._RF.push({},"f1c51JfsA5Ldpujb+oUGuMD","RoleLiufeng",void 0);a.ccclass,a.property;var u=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).name="攻击",t.desc="造成100%的基础攻击伤害",t.isAOE=!1,t.isHeal=!1,t.target=c.ENEMY,t}return t(n,e),n.prototype.changeDamage=function(t){return e.prototype.changeDamage.call(this,t)},n}(i),f=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).name="龙力灌注",t.desc="流风召唤龙族本源能量为友方恢复300%伤害值的HP",t.isAOE=!1,t.isHeal=!0,t.target=c.ALLY,t.mp=15,t}return t(n,e),n.prototype.changeDamage=function(t){return e.prototype.changeDamage.call(this,3*t)},n}(i),p=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).name="龙之祈愿",t.desc="流风通过祈愿每回合为全体队友恢复30%伤害值的HP",t.isPassive=!0,t.isHeal=!0,t.type=l.HOLO,t.target=c.ALLY,t.effect=r,t}return t(n,e),n.prototype.changeDamage=function(t){return e.prototype.changeDamage.call(this,.3*t)},n}(o);e("RoleLiufeng",function(e){function n(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).roleName="流风",t.desc="龙族的理疗师，可以操控龙之本源对队友进行治疗，和大部分的龙族战士不同，流风战斗方面的天赋几乎没有，因此只能使用治愈系的回复能力保护大家",t.img="Images/Role/Liufeng/small",t.hp=100,t.mp=100,t.attack=10,t.skillList=[new u,new f],t.passiveSkillList=[new p],t}return t(n,e),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleNian.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Buff.ts","./Skill.ts","./State.ts","./Role.ts"],(function(e){"use strict";var t,a,n,r,o,c,s,f;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,n=e._decorator},function(e){r=e.Buff},function(e){o=e.Skill,c=e.PassiveSkill},function(e){s=e.globalMessage},function(e){f=e.Role}],execute:function(){a._RF.push({},"3178eWNtchExpUmlN1aLSar","RoleNian",void 0);var u;n.ccclass,n.property;function i(e){var t=new r;return t.name="表人格",t.desc="攻击力减伤50%",t.round=999,t.sourceCard=e,t.propScale.attack=.5,t.propScale.hp=2,t.icon="Images/BuffIcon/004防",t}!function(e){e[e.B=0]="B",e[e.L=1]="L"}(u||(u={}));var l=function(e){function a(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).name="失常",t.desc="表人格切换里人格，攻击力增加到基础值的200%，生命下降为基础的50%",t.mp=10,t}t(a,e);var n=a.prototype;return n.beforeChangeDamage=function(e){e.state.removeBuffByName("表人格"),e.state.removeBuffByName("里人格"),e.state.role.form=u.L;var t=function(e){var t=new r;return t.name="里人格",t.desc="攻击力增幅100%",t.round=999,t.sourceCard=e,t.propScale.attack=2,t.propScale.hp=.5,t.icon="Images/BuffIcon/006攻击强化",t}(e);e.state.addBuff(t)},n.changeDamage=function(t,a){if(a.state.role.form===u.L){var n=Math.ceil(.75*t),r=Math.ceil(.75*a.state.maxHp);n>r&&(n=r),a.beHeal(n,new p,a)}return e.prototype.changeDamage.call(this,t)},a}(o),m=function(e){function a(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).name="协调",t.desc="里人格切换表人格，攻击力减少到基础值的50%，但可以攻击2次，生命上升至基础数值的200%",t.mp=10,t.attackCount=2,t}t(a,e);var n=a.prototype;return n.beforeChangeDamage=function(e){e.state.removeBuffByName("表人格"),e.state.removeBuffByName("里人格"),e.state.role.form=u.B;var t=i(e);e.state.addBuff(t)},n.changeDamage=function(t,a){return e.prototype.changeDamage.call(this,t)},a}(o),p=function(e){function a(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).name="调率（吸血）",t.desc="里人格攻击可以吸取0.75的生命值，且一次性吸取的生命值不可大于生命的0.75倍",t}return t(a,e),a}(c),h=function(e){function a(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).name="调率（免死）",t.desc="可以免疫一次致命伤（此特性一局一次且只能为里人格使用）",t}return t(a,e),a}(c);e("RoleNian",function(e){function a(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).roleName="念",t.desc="念，这个人物暂无简介。",t.form=u.B,t.hp=100,t.mp=100,t.attack=10,t.skillList=[new l,new m],t.passiveSkillList=[new p,new h],t}t(a,e);var n=a.prototype;return n.start=function(e){e.state.removeBuffByName("表人格"),e.state.removeBuffByName("里人格");var t=e.state.role;t.form=u.B;var a=i(e);e.state.addBuff(a);var n=new r;n.name="免疫死亡",n.desc="免疫致命一击",n.round=999,n.sourceCard=e,n.icon="Images/BuffIcon/007复生",n.beAttack=function(a,r,o){return o||a>=e.state.currentHp&&t.form===u.L&&(a=0,e.state.removeBuffByName("免疫死亡"),s.addMessage("["+e.state.role.roleName+"]触发["+n.name+"]")),a},e.state.addBuff(n)},n.update=function(e){this.form===u.B?this.suffix="表人格":this.suffix="里人格"},a}(f));a._RF.pop()}}}));

System.register("chunks:///_virtual/RolePool.ts",["cc","./RoleKayldris.ts","./RoleLiufeng.ts","./RoleLianhe.ts","./RoleFox.ts","./RoleNian.ts"],(function(o){"use strict";var e,n,t,i,l,s;return{setters:[function(o){e=o.cclegacy},function(o){n=o.RoleKayldris},function(o){t=o.RoleLiufeng},function(o){i=o.RoleLianhe},function(o){l=o.RoleFox},function(o){s=o.RoleNian}],execute:function(){e._RF.push({},"f89757H3sBOtY7M/E3NVqKR","RolePool",void 0);o("RolePool",[n,t,i,l,s]);e._RF.pop()}}}));

System.register("chunks:///_virtual/Skill.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){var e,n;t({PassiveType:void 0,SkillTarget:void 0}),i._RF.push({},"b5cf68BSfhL0Yfw+AHJn+jG","Skill",void 0),function(t){t[t.ENEMY=0]="ENEMY",t[t.ALLY=1]="ALLY"}(e||(e=t("SkillTarget",{}))),function(t){t[t.HOLO=0]="HOLO",t[t.PER_ROUND=1]="PER_ROUND",t[t.NONE=2]="NONE"}(n||(n=t("PassiveType",{})));t("Skill",function(){function t(){this.name="",this.desc="",this.effect=void 0,this.isAOE=!1,this.isPassive=!1,this.isHeal=!1,this.target=e.ENEMY,this.mp=0,this.attackCount=1}var i=t.prototype;return i.changeSkillProp=function(t){},i.beforeChangeDamage=function(t){},i.changeDamage=function(t,i,e){return Math.ceil(t)},t}()),t("PassiveSkill",function(){function t(){this.name="",this.desc="",this.type=n.NONE,this.effect=void 0,this.isHeal=!1,this.target=e.ENEMY}var i=t.prototype;return i.changeSkillProp=function(t){},i.beforeChangeDamage=function(t){},i.changeDamage=function(t,i,e){return Math.ceil(t)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillSelectBtn.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,l,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,l=t._decorator,c=t.Node,r=t.Component}],execute:function(){var o;n._RF.push({},"cc26a1xUExL3KxJJXYnpGZ8","SkillSelectBtn",void 0);var i=l.ccclass;l.property,t("SkillSelectBtn",i("SkillSelectBtn")(o=function(t){function n(){for(var e,n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))||this).skill=null,e.sourceCard=null,e}e(n,t);var l=n.prototype;return l.start=function(){var t=this;this.node.on(c.EventType.TOUCH_END,(function(){t.sourceCard.handleSkillSelect(t.skill)}))},l.update=function(t){},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillSelector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Animate.ts","./SkillSelectBtn.ts"],(function(e){"use strict";var t,l,n,i,o,r,s,a,c;return{setters:[function(e){t=e.inheritsLoose},function(e){l=e.cclegacy,n=e._decorator,i=e.instantiate,o=e.Label,r=e.Component},function(e){s=e.applyZoomFromZeroTo,a=e.applyZoomTo},function(e){c=e.SkillSelectBtn}],execute:function(){var h;l._RF.push({},"beb53BVwYZBQLcZxxW0Oaf/","SkillSelector",void 0);var d=n.ccclass;n.property,e("SkillSelector",d("SkillSelector")(h=function(e){function l(){for(var t,l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).skillSelectBtn=null,t.skillList=[],t}t(l,e);var n=l.prototype;return n.start=function(){},n.open=function(e){var t=this,l=this.node.getChildByPath("SkillSelector/SkillPanel/Col/SkillSelectBtn");this.skillSelectBtn=i(l),this.node.removeChild(l);var n=this.node.getChildByPath("SkillSelector/RolePanel");n.getChildByName("姓名").getComponent(o).string=e.state.role.roleName,n.getChildByName("简介").getComponent(o).string=e.state.role.desc;var r=e.state.role.passiveSkillList.map((function(e){return e.name+"："+e.desc})).join("\n\n");n.getChildByName("被动").getComponent(o).string="被动技能：\n"+r;var a=this.node.getChildByPath("SkillSelector/SkillPanel/Col");a.destroyAllChildren(),this.skillList=e.state.role.skillList,this.skillList.forEach((function(l){var n=i(t.skillSelectBtn),r=l.name;l.mp&&(r+="(需要MP"+l.mp+")"),n.getChildByName("Title").getComponent(o).string=r,n.getChildByName("Desc").getComponent(o).string=l.desc,n.getComponent(c).skill=l,n.getComponent(c).sourceCard=e,a.addChild(n)})),s(this.node.getChildByName("SkillSelector"))},n.close=function(){var e=this;a(this.node.getChildByName("SkillSelector"),0,.1,(function(){e.node.destroy()}))},n.update=function(e){},l}(r))||h);l._RF.pop()}}}));

System.register("chunks:///_virtual/Sleep.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("sleep",(function(e){return new Promise((function(t){setTimeout((function(){return t()}),1e3*e)}))})),t._RF.push({},"3be66kPFkNLUJYJKNP0I1+0","Sleep",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Start.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./MapLevelConfig.ts","./State.ts"],(function(t){"use strict";var e,n,o,r,a,c,u,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component},function(t){a=t.loadSceneWithLoading,c=t.SCENE_NAME},function(t){u=t.getRandomNode,i=t.mapLevel1},function(t){s=t.globalState}],execute:function(){var p;n._RF.push({},"90847Vfk15I7YRHnMe8Nup6","Start",void 0);var l=o.ccclass;o.property,t("Start",l("Start")(p=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.goBattleScene=function(){s.gameStep=0,s.currentMapNode=u(i,s.gameStep),a(c.BATTLE)},o.update=function(t){},n}(r))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["./rollupPluginModLoBabelHelpers.js","cc","./moment.mjs_cjs=&original=.js","./mobx-cc.ts","./moment.js"],(function(t){"use strict";var e,s,i,n;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy},null,function(t){i=t.makeAutoObservable},function(t){n=t.default}],execute:function(){var a;t("SELECT_MODE",void 0),s._RF.push({},"54a1cbd3VxMU5HnwhsLpD23","State",void 0),function(t){t[t.NORMAL=0]="NORMAL",t[t.SELECT_ENEMY=1]="SELECT_ENEMY",t[t.SELECT_ALLY=2]="SELECT_ALLY"}(a||(a=t("SELECT_MODE",{})));var o=function(){function t(){this.messageList=[],i(this)}return t.prototype.addMessage=function(t){this.messageList.push(n().format("HH:mm:ss.SSS")+"\t"+t)},e(t,[{key:"message",get:function(){return this.messageList[this.messageList.length-1]}}]),t}();t("globalState",new function(){this.selectMode=a.NORMAL,this.sourceCard=null,this.sourceSkill=null,this.gameLevel=0,this.gameStep=0,this.currentMapNode=null,this.isAttacking=!1,this.gold=0,this.items=[],this.nextSceneName="Start",i(this)}),t("globalMessage",new o);s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});